<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tutor Connect</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="style.css">
</head>
<body>

<nav>
  <h2>Tutor Connect</h2>
  <ul>
    <li><a href="#homeSection">Home</a></li>
    <li><a href="create.html">Create Profile</a></li>
    <li><a href="#profilesSection">Show Profiles</a></li>
    <li><a href="#aboutSection">About</a></li>
    <li><a href="#contactSection">Contact</a></li>
  </ul>
</nav>

<!-- Home Section -->
<section id="homeSection">
  <div class="hero">
    <div class="hero-text">
      <h1>Welcome to <span class="highlight">Tutor Connect</span></h1>
      <p>Empowering students to find the perfect tutor and helping tutors showcase their expertise — all in one place.</p>
      <a href="create.html" class="btn">Get Started</a>
    </div>
    <div class="hero-image">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Tutor illustration">
    </div>
  </div>
</section>

<!-- Show Profiles Section -->
<section class="profiles-container" id="profilesSection">
  <h2>All Profiles</h2>
  <button class="filter-toggle" id="showFilter">&#9776; Filters</button>

  <div class="filter-panel" id="filterPanel">
    <div class="filter-item">
      <input type="text" id="filterDept" placeholder="Department">
      <i class="fas fa-building"></i>
    </div>
    <div class="filter-item">
      <input type="text" id="filterSubject" placeholder="Subject">
      <i class="fas fa-book"></i>
    </div>
    <button class="btn" id="applyFilter">Apply Filter</button>
  </div>

  <div id="profiles"></div>
</section>

<!-- About Section -->
<section class="about-container" id="aboutSection">
  <h2>About Tutor Connect</h2>
  <p>
    <strong>Tutor Connect</strong> is a trusted platform that connects <strong>SUST student tutors</strong> with students and guardians in Sylhet. 
    It allows verified SUST students to create profiles highlighting their teaching subjects, department, and availability, 
    helping learners easily find qualified tutors from the university.
  </p>
  <p>
    With features like <strong>smart filters</strong> for subject and location and <strong>direct WhatsApp contact</strong>, 
    Tutor Connect makes finding the right tutor quick and effortless. 
    Our mission is to build a reliable, locally focused network where education meets trust and opportunity.
  </p>
</section>

<!-- Contact Section -->
<section class="contact-container" id="contactSection">
  <h2>Contact Us</h2>
  <p>Have questions or feedback? Reach out to us anytime!</p>
  <form>
    <input type="text" placeholder="Your Name" required><br>
    <input type="email" placeholder="Your Email" required><br>
    <textarea placeholder="Your Message" rows="4" required></textarea><br>
    <button class="btn" type="submit">Send</button>
  </form>
</section>
<!-- ✅ Footer Section -->
<footer>
  <div class="footer-content">
    <div class="footer-left">
      <h3><i class="fas fa-graduation-cap"></i> Tutor Connect</h3>
      <p>Connecting students and tutors — building brighter futures together.</p>
    </div>

    <div class="footer-center">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="#homeSection">Home</a></li>
        <li><a href="#formSection">Create Profile</a></li>
        <li><a href="#profilesSection">Show Profiles</a></li>
        <li><a href="#aboutSection">About</a></li>
        <li><a href="#contactSection">Contact</a></li>
      </ul>
    </div>

    <div class="footer-right">
      <h4>Follow Us</h4>
      <div class="social-icons">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Tutor Connect | All Rights Reserved</p>
  </div>
</footer>

<script>
// Form submission (only runs if the form exists)
const profileForm = document.getElementById("profileForm");
if (profileForm) {
  profileForm.onsubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData(profileForm);
    await fetch("/api/profiles", { method: "POST", body: formData });
    alert("Profile Created Successfully!");
    profileForm.reset();
  };
}

// Fetch profiles
async function fetchProfiles(department="", subject="") {
  let url = "/api/profiles";
  if(department && subject) url += `?department=${department}&subject=${subject}`;
  else if(department) url += `?department=${department}`;
  else if(subject) url += `?subject=${subject}`;

  const res = await fetch(url);
  const profiles = await res.json();
  const container = document.getElementById("profiles");
  container.innerHTML = "";
  profiles.forEach(p => {
    const div = document.createElement("div");
    div.className = "profile-card";
    div.innerHTML = `
      <img src="/uploads/${p.photo}" alt="photo">
      <div class="profile-info">
        <h3>${p.full_name}</h3>
        <p><strong>Dept:</strong> ${p.department}</p>
        <p><strong>Subject:</strong> ${p.subject_to_teach}</p>
        <p><strong>Salary:</strong> ${p.salary_range}</p>
      </div>`;
    div.onclick = () => window.location.href = `profile.html?id=${p.id}`;
    container.appendChild(div);
  });
}

document.getElementById("applyFilter").onclick = () => {
  const dept = document.getElementById("filterDept").value;
  const subject = document.getElementById("filterSubject").value;
  fetchProfiles(dept, subject);
};

const showFilterBtn = document.getElementById("showFilter");
const filterPanel = document.getElementById("filterPanel");
showFilterBtn.onclick = () => {
  filterPanel.style.display = filterPanel.style.display === "flex" ? "none" : "flex";
};

// Fetch profiles initially
fetchProfiles();
</script>

</body>
</html>
