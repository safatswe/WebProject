<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>SUST Tutor</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="/frontend/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <link rel="stylesheet" href="/frontend/bootstrap-5.3.3-dist/css/bootstrap.min.css">
</head>

<body>
 <nav>
    <div class="nav-box" class="w-100" style="background-color: black; height: 90px; padding: 10px;">
      <div class="navbar rounded d-flex justify-content-between align-items-center flex-wrap text-light fw-bolder"
        style="background-color: rgb(37, 30, 50); width: 1400px; margin: auto; height: 70px; box-shadow: 4px 4px 8px rgb(165, 2, 24)">
        <div class="navbar-left w-25 d-flex justify-content-center align-items-center">
          <h2 class="fw-bolder" style="box-shadow: 4px 4px 8px rgb(165, 121, 9);">SUST TUTOR</h2>
        </div>
        <div class="navbar-right me-5 mt-2">
          <ul class="list d-flex gap-4 list-unstyled">
            <li><a class="list-nav text-decoration-none text-light" href="#homeSection">Home</a></li>
            <li><a class="list-nav text-decoration-none  text-light" href="#profilesSection">Show Profiles</a></li>
            <li><a class=" list-nav text-decoration-none  text-light" href="#aboutSection">About Us</a></li>
            <li><a class=" list-nav text-decoration-none  text-light" href="#contactSection">Contact Us</a></li>
            <button class="btn-nav rounded text-light p-1" style="border-style: none;"><a
                class="text-decoration-none text-dark" href="create.html">Register</a></button>
            <button class=" btn-nav rounded text-light border-none p-1" style="border-style: none;"><a
                class="text-decoration-none text-dark" href="login.html">Login</a></button>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Home Section -->
  <section id="homeSection" class="d-flex justify-content-center" style="background-color: #233344;">
    <div class="hero d-flex flex-wrap gap-5 mt-5 rounded-3 mb-3" style="box-shadow: 2px 2px 6px 6px goldenrod;">
      <div class="banner-heading p-4">
        <h1 class="text-light mt-5 ms-3">Welcome To</h1>
        <h1><b class="text-warning ms-5">SUST TUTOR</b></h1>
        <h2 class="hero-headline text-light  ms-5 mt-4">Trusted</h2>
        <h2 class="hero-headline text-light ms-5">Authentic</h2>
        <h2 class="hero-headline text-light ms-5">Reliable Platform</h2>
        <button class="contact-btn rounded mt-4 ms-5 p-2"><a class="text-decoration-none text-light fw-bold"
            href="#contactSection">Contact Us</a></button>
      </div>
      <div class="banner-right d-flex justify-content-center">
        <img src="/uploads/sust1.png.png" alt="IICT Building" style="width: 700px; height: 450px;">
      </div>
    </div>
  </section>

  <!-- Show Profiles Section -->
  <section class="profiles-container" id="profilesSection">
    <h2 class="text-center text-dark">All Profiles</h2>
    <div
      class="filter-panel text-center p-3 rounded-3 justify-content-center gap-4 d-flex align-items-center flex-wrap"
      id="filterPanel" style="background-color: #364d63;">
      <div class="filter-item rounded p-3">
        <input class="rounded-3 p-2" style="width: 230px;" type="text" id="filterDept" placeholder="Department">
      </div>
      <div class="filter-item">
        <input class="rounded-3 p-2" style="width: 230px;" type="text" id="filterSubject" placeholder="Subject">
      </div>
      <button class="btn p-2" style="width: 100px ; background-color:rgb(83, 171, 218)" ; id="applyFilter" title="Apply Filter"><i
          class="fas fa-search"></i></button>
    </div>

    <div id="profiles"></div>
  </section>

  <!-- About Section -->
  <section id="aboutSection">
    <div class="about-box p-4 " style="width: 1200px; margin: auto;">
      <h2 class="text-center fw-bold mt-5">About Us</h2>
      <div class="about-us d-flex justify-content-between flex-wrap border rounded-3">
        <div class="about-left text-center rounded p-5 fw-bolder text-dark">
          <p><strong>TUTOR SUST</strong> is a trusted platform that connects <strong>SUST student tutors</strong>
            with students and guardians in Sylhet. It allows verified SUST students to create profiles highlighting
            their teaching subjects, department, and availability, helping learners easily find qualified tutors from
            the university.</p>
          <p>
            With features like <strong>smart filters</strong> for subject and location and <strong>direct WhatsApp
              contact</strong>,Tutor Connect makes finding the right tutor quick and effortless. Our mission is to build
            a
            reliable, locally focused network where education meets trust and opportunity.
          </p>
        </div>
        <div class="about-right">
          <img class="cartoon-img" src="/uploads/46325309.jpg" alt="" srcset="">
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contactSection">
    <div style="margin: auto;">
      <h2 class="text-center text-light">Contact Us</h2>
      <form id="contactForm" class="border border-2 rounded p-4 bg-dark" style="width: 400px; margin: auto;">
        <input class="mt-4 rounded w-100 p-3 bg-light text-dark" id="name" type="text" placeholder="Your Name" required>
        <input class="mt-4 rounded w-100 p-3 bg-light text-dark" id="email" type="email" placeholder="Your Email"
          required>
        <textarea class="mt-4 rounded w-100 p-3 bg-light text-dark" id="message"></textarea>
        <div class="d-flex justify-content-center">
          <button class="send-btn mt-4 w-25 rounded p-2" type="submit">Send</button>
        </div>
      </form>

      <p id="responseMsg" style="margin-top: 15px; font-weight: 600; color: #2c3e50;"></p>
    </div>
  </section>



  <!-- Footer Section -->
  <footer class="bg-dark text-light text-center p-3 w-100">
    <div class="footer-content mt-3 d-flex justify-content-center flex-wrap text-start gap-5 p-3">
      <div class="footer-left w-25">
        <h3 class="text-warning "><i class="fas fa-graduation-cap"></i>SUST TUTOR</h3>
        <p>Connecting students and tutors â€” building brighter futures together.</p>
      </div>

      <div class="footer-center w-25">
        <h4 class="text-warning">Quick Links</h4>
        <ul class="list-unstyled">
          <li><a class="text-decoration-none" href="#homeSection">Home</a></li>
          <li><a class="text-decoration-none" href="create.html">Create Profile</a></li>
          <li><a class="text-decoration-none" href="#profilesSection">Show Profiles</a></li>
          <li><a class="text-decoration-none" href="#aboutSection">About Us</a></li>
          <li><a class="text-decoration-none" href="#contactSection">Contact Us</a></li>
        </ul>
      </div>

      <div class="footer-right w-25">
        <h4 class="text-warning">Follow Us</h4>
        <div class="social-icons d-flex gap-3 fs-4">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>
    </div>

    <div class="footer-bottom mt-3 p-2 fs-6 text-secondary border-top text-secondary">
      <p>&copy; 2025 Tutor Connect | All Rights Reserved</p>
    </div>
  </footer>

  <script>
    //  contact us logic
    const form = document.getElementById('contactForm');
    const responseMsg = document.getElementById('responseMsg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const data = {
        name: form.name.value.trim(),
        email: form.email.value.trim(),
        message: form.message.value.trim(),
      };

      responseMsg.textContent = 'Sending...';

      try {
        const res = await fetch('/send-email', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });

        const json = await res.json();

        if (json.ok) {
          responseMsg.textContent = 'Message sent! Thank you.';
          form.reset();
        } else {
          responseMsg.textContent = 'Failed to send: ' + (json.error || 'Unknown error');
        }
      } catch (err) {
        responseMsg.textContent = 'Network error, please try again later.';
        console.error(err);
      }
    });
    // Form submission (only runs if the form exists)
    const profileForm = document.getElementById("profileForm");
    if (profileForm) {
      profileForm.onsubmit = async (e) => {
        e.preventDefault();
        const formData = new FormData(profileForm);
        await fetch("/api/profiles", { method: "POST", body: formData });
        alert("Profile Created Successfully!");
        profileForm.reset();
      };
    }

    // Fetch profiles
    async function fetchProfiles(department = "", subject = "") {
      let url = "/api/profiles";
      if (department && subject) url += `?department=${department}&subject=${subject}`;
      else if (department) url += `?department=${department}`;
      else if (subject) url += `?subject=${subject}`;

      const res = await fetch(url);
      const profiles = await res.json();
      const container = document.getElementById("profiles");
      container.innerHTML = "";

      profiles.forEach(p => {
        const div = document.createElement("div");
        div.className = "profile-card";
        div.innerHTML = `
      <div class="show-profile d-flex gap-5 justify-content-center flex-wrap container w-100">
        <div class="tutor-details p-1 rounded">
          <img class="tutor-img" src="/uploads/${p.photo}" alt="photo">
          <h6 class="text-center text-warning fw-bolder mb-3 p-3" style="background-color:black;">${p.full_name}</h6>
          <div class="btn-details text-center">
            <button class="details-btn btn mt-0 mb-2 text-light rounded" style="background-color: rgb(91, 172, 10);">Details</button>
          </div>
        </div>
      </div>`;

        const detailsBtn = div.querySelector('.details-btn');
        detailsBtn.addEventListener('click', () => {
          window.location.href = `profile.html?id=${p.id}`;
        });

        container.appendChild(div);
      });
    }

    // Filter button click
    document.getElementById("applyFilter").onclick = () => {
      const dept = document.getElementById("filterDept").value;
      const subject = document.getElementById("filterSubject").value;
      fetchProfiles(dept, subject);
    };
    // Fetch profiles initially
    fetchProfiles();

  </script>
  <script src="/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
